<!doctype html>
<html>
  <head>
  <title>Modus test page</title>
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js'></script>
  <script src='http://caterwauljs.org/build/caterwaul.js'></script>
  <script src='http://caterwauljs.org/build/extensions/std.pre.js'></script>
  <script src='http://caterwauljs.org/build/extensions/ui.pre.js'></script>
  <script src='../modus.js'></script>

  <script>
    $(caterwaul.js_ui(caterwaul.js_all())(function () {
      $('body').append(list_of_people().val([{name: 'Spencer', email: 'spencer@spencertipping.com'}, {name: 'Joyce', email: 'joyce@joycetipping.com'}]),
                       jquery in button('New person') /click(add_person),
                       jquery in button('Show value') /click(show_value),
                       jquery in pre.value_display),

      where [person()         = jquery in div.person(input.name, input.email) /modus('composite', {name: '.name', email: '.email'}),
             add_person()     = $('.list-of-people').append(person()),
             show_value()     = $('.value-display').text(JSON.stringify($('.list-of-people').val())),
             list_of_people() = jquery in div.list_of_people /modus('list', person)]}));
  </script>
  </head>
  <body></body>
</html>
