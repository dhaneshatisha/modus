<!doctype html>
<html>
  <head>
  <title>Modus test page</title>
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js'></script>
  <script src='http://caterwauljs.org/build/caterwaul.js'></script>
  <script src='http://caterwauljs.org/build/extensions/std.pre.js'></script>
  <script src='http://caterwauljs.org/build/extensions/ui.pre.js'></script>
  <script src='../modus.js'></script>

  <script>
    $(caterwaul.js_ui(caterwaul.js_all())(function () {
      $('body').append(list_of_people([{name: 'Spencer', email: 'spencer@spencertipping.com'}, {name: 'Joyce', email: 'joyce@joycetipping.com'}]),
                       jquery in button('New person')),

      where [person_behavior = modus.composite({name: 'input.name', email: 'input.email'}),
             person(p)       = person_behavior(jquery in tr(td(input.name), td(input.email), td(a('nuke') /click(given.nothing in $(this).parent().remove()))), p),

             new_person()    = $('.list-of-people').append(person({name: '', email: ''})),

             list_of_people_behavior = modus.list(person),
             list_of_people(ps)      = list_of_people_behavior(jquery in table.list_of_people, ps)]}));
  </script>
  </head>
  <body></body>
</html>
